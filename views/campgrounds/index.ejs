<% layout('layouts/boilerplate')%>

<link rel="stylesheet" href="/stylesheets/index.css" />

<div class="mt-9 p-5 text-dark rounded jumbotron">
  <!-- <h1>Welcome to CampGenieðŸ”¥</h1> -->

  <h2>All Campgrounds</h2>

  <!-- <div class="mb-3 mt-3">
    <a class="btn btn-primary btn-lg" href="/campgrounds/new">Add Campground</a>
  </div> -->
</div>

<div id="map" class="map" style="width: 100%; height: 300px"></div>

<div
  class="row justify-content-center text-center flex-wrap m-3"
  id="campground-grid"
>
  <% for (let campground of campgrounds){%>
  <div class="card m-1" style="width: 25rem">
    <%if(campground.images.length) {%>
    <img class="img-fluid" alt="" src="<%=campground.images[0].url%>" />
    <% }else {%>
    <img
      class="img-fluid"
      alt=""
      src="https://res.cloudinary.com/douqbebwk/image/upload/v1600103881/YelpCamp/lz8jjv2gyynjil7lswf4.png"
    />
    <% } %>
    <hr />
    <div class="card-body">
      <h4 class="card-title"><%= campground.title %></h4>
      <p class="card-text"><%= campground.description %></p>
      <p class="card-text">
        <small class="text-muted"><%= campground.location%></small>
      </p>
      <a class="btn btn-primary" href="/campgrounds/<%=campground._id%>"
        >View <%=campground.title%></a
      >
    </div>
  </div>
  <% }%>
</div>

<script>
  const mapToken = '<%-process.env.MAPBOX_TOKEN%>';
  const campgrounds = { features: <%- JSON.stringify(campgrounds) %> }
</script>

<script src="/javascripts/clusterMap.js"></script>
